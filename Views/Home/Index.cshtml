@{
    ViewBag.Title = "Home Page";
}

@model KassaTest.Models.CreditInfo
@using (Html.BeginForm("Calculations", "Home", FormMethod.Get, new { @class = "form-horizontal", role = "form" }))
{
    //@Html.AntiForgeryToken()
    <div class="row col-md-6 col-md-offset-3"><h2>Кредитный Калькулятор</h2></div>
    //@Html.ValidationSummary()
    <div class="form-group">
        <div class="row col-md-12 col-md-offset-3 alert-danger h4"> @ViewBag.ErrorMessage </div>
        @Html.LabelFor(c => c.Sum, "Сумма кредита", new { @class = "col-md-4 control-label" })
        <div class="col-md-8">
            @Html.TextBoxFor(c => c.Sum, new { @class = "form-control", required = "required", pattern = @"\d+(\.\d{1,2})?", placeholder = "30000.00"})
        </div>

        @Html.LabelFor(c => c.Period, "Срок кредита(дней)", new { @class = "col-md-4 control-label" })
        <div class="col-md-8">
            @Html.TextBoxFor(c => c.Period, new { @class = "form-control", required = "required", pattern = @"^[ 0-9]+$", placeholder = "60" })
        </div>

        @Html.LabelFor(c => c.Percent, "Ставка в день(%)", new { @class = "col-md-4 control-label" })
        <div class="col-md-8">
            @Html.TextBoxFor(c => c.Percent, new { @class = "form-control", required = "required", pattern = @"\d+(\.\d{1,2})?", placeholder = "1.00" })
        </div>

        @Html.LabelFor(c => c.TimeStep, "Шаг платежа в днях", new { @class = "col-md-4 control-label" })
        <div class="col-md-8">
            @Html.TextBoxFor(c => c.TimeStep, new { @class = "form-control", required = "required", pattern = @"^[ 0-9]+$", placeholder = "10" })
        </div>

    </div>
    <div class="form-group">
        <div class="col-md-offset-4 col-md-10">
            <input type="submit" class="btn btn-default" value="Рассчитать" />
        </div>
    </div>

}

<script>
    $("#Sum").blur(function () {
        this.value = this.value.replace(',', '.');
        if (this.value.indexOf('.') == -1) {
            this.value += '.00';
        }
    })
    $("#Percent").blur(function () {
        this.value = this.value.replace(',', '.');
        if (this.value.indexOf('.') == -1) {
            this.value += '.00';
        }
    })
</script>



